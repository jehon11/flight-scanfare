function refreshPage(outerHTML) {
  const newTicketPage = document.getElementById('ticket-container');
  newTicketPage.outerHTML = outerHTML;
}

refreshPage('<%= j render "deals/ticket-container", itineraries: @itineraries, legs: @legs, carriers: @carriers, agents: @agents, key: @key %>');

console.log('calling api again');

if (<%= @itineraries.length %> > 0) {
  let loading = document.getElementById('loading-box');
  if (loading !== null) {
    loading.innerHTML = '';
  }
}

setTimeout(() => {
  let button = document.getElementById('refresh-button');
  button.click();
}, 2000);
